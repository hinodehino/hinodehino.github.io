<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title><link rel="stylesheet" type="text/css" href="fontstyles.css">
    <style type="text/css">
		html{
    		overflow: hidden;
    	}
    	body{
			width: 100vw;
			height: 100vh;
			margin: 0;
			padding: 0;
			font-family: 'TT Commons';
			color: #222;
		}
		.dark{
			background: #1a1b1c;
			color: #ebeff2;
		}
		#content{
			font-size: 36px;
			font-weight: 500;
			width: 100%;
			height: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
		}
		.button{
			user-select: none;
			width: 100px;
			margin-top: 1%;
			border-radius: 5px;
			font-size: 18px;
			display: flex;
			justify-content: center;
			align-items: center;
			color: white;
			transition: all .2s ease;
			padding: 3px;
			background: transparent;
			border: 2px solid #0d7eff;
			color: #0d7eff;
		}
		.idle{
			cursor: pointer;
			border: 2px solid #4bd14d;
			background: #4bd14d;
			color: black;
			mix-blend-mode: screen;
		}
		.idle:hover{
			background: transparent;
			color: #4bd14d;
		}
	</style>
</head>
<body>
	<div id="content" class="dark">
		<div id="metric">0 taps</div>
		<div class="button idle" id="control" onclick="track()">start</div>
	</div>
</body>
<script type="text/javascript">
	var metric = document.getElementById("metric")
	var control = document.getElementById("control")
	var taps = 0
	var mode = 0

	var tap = function(e){
		taps += 1
		metric.innerText = taps + ' taps'
	}

	var track = function(){
		if (!mode){
			mode = 1
			control.innerText = '5s'
			control.classList.remove('idle')
			metric.innerText = '0 taps'
			timeLeft = 4
			var lefting = setInterval(function(){
				control.innerText = timeLeft + 's'
				timeLeft -= 1
			}, 1000)
			var tapTracking = document.addEventListener('keydown', tap)
			setTimeout(function(){
				document.removeEventListener('keydown', tap)
				metric.innerText = taps / 5 + ' tps'
				taps = 0
				clearInterval(lefting)
				control.classList.add('idle')
				control.innerText = 'start'
				mode = 0
			}, 5000)
		}
	}

</script>
</html>